<div ng-repeat="file in ctrl.files | orderBy:'fileName'" class="pst-file-list-item">
    <md-button ng-if="(ctrl.getLastVersion(file).version > 1) && ctrl.shownVersions[file.fileName] !== true"
               class="file-list-toggle-button"
               ng-click="ctrl.toggleVersions(file)">
        <md-icon md-svg-icon="content:add"></md-icon>
        <md-tooltip class="pst-file-list-tooltip"
                    md-direction="right"
                    md-delay="750">Show {{file.versions.length - 1}} previous versions
        </md-tooltip>
    </md-button>
    <md-button ng-if="ctrl.shownVersions[file.fileName] === true"
               class=" file-list-toggle-button"
               ng-click="ctrl.toggleVersions(file)">
        <md-icon md-svg-icon="content:remove"></md-icon>
    </md-button>
    <a target="_blank" ng-href="{{::ctrl.getUrl(ctrl.getLastVersion(file))}}" ng-click="ctrl.download()">
        <span>{{::file.fileName | stringLength:30:true}}</span>
        <md-tooltip class="pst-file-list-tooltip" ng-if="::file.fileName.length > 30">{{::file.fileName}}</md-tooltip>
    </a>
    <span class="pst-file-list-version"
          ng-if="ctrl.getLastVersion(file).version > 1">({{'Version' | translate}} {{ctrl.getLastVersion(file).version}})</span>

    <div class="file-version-list" ng-show="ctrl.shownVersions[file.fileName]">
        <div ng-repeat="version in file.versions | orderBy:'version':true"
             ng-if="version.version < ctrl.getLastVersion(file).version">
            <a target="_blank" ng-href="{{::ctrl.getUrl(version)}}" ng-click="ctrl.download()">
                Version {{::version.version}}
            </a>
        </div>
    </div>
</div>
